<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="scored">
<title>scored • scored</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="scored">
<meta property="og:description" content="scored">
<meta property="og:image" content="/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">scored</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="active nav-item">
  <a class="nav-link" href="../articles/scored.html">Get started</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav"></ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>scored</h1>
            
      
      
      <div class="d-none name"><code>scored.Rmd</code></div>
    </div>

    
    
<p>As an example, consider two cartridge cases fired from the same Ruger
SR9 semiautomatic 9-mm handgun. Learn more about the collection of these
cartridge cases <a href="https://www.ojp.gov/pdffiles1/nij/249874.pdf" class="external-link">here</a>. The
cartridge cases are uniquely identified as “K013sA1” and “K013sA2.” We
assume that the markings on these cartridge cases left by the handgun
during the firing process are similar.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">scored</span><span class="op">)</span></span>
<span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">cmcR</span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">impressions</span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyverse.tidyverse.org" class="external-link">tidyverse</a></span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"K013sA1"</span>,<span class="st">"K013sA2"</span><span class="op">)</span></span></code></pre></div>
<p>Below is a visual of the two cartridge case scans. Note that these
scans have already undergone some preprocessing to emphasize the breech
face impression markings. The similarity between these cartridge cases
is not immediately apparent. We can calculate similarity features
between these two scans using functions available in the
<code>scored</code> package.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/pkg/impressions/man/x3pPlot.html" class="external-link">x3pPlot</a></span><span class="op">(</span><span class="va">K013sA1</span>,<span class="va">K013sA2</span><span class="op">)</span></span></code></pre></div>
<p><img src="scored_files/figure-html/unnamed-chunk-2-1.png" width="700"></p>
<p>First, we compare the two scans using the cell-based comparison
procedure implemented in the <code>cmcR</code> R package. Briefly, this
cell-based comparison involves dividing one scan into a grid of “cells”
and identifying the rotation/translation at which each cell aligns best
in the other scan. This comparison is repeated in both directions:
K013sA1 is divided into cells that are compared to K013sA2, and then
K013sA2 is divided into cells that are compared to K013sA1. The
resulting <code>comparisonData</code> data frame contains features
related to the alignment of each cell in the other scan. By itself, the
features in <code>comparisonData</code> are quite noisy – it’s difficult
to measure the similarity between K013sA1 and K013sA2. The
<code>scored</code> package contains functions that accept the
<code>comparisonData</code> features as input and return more
informative similarity features.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">comparisonData</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/comparisonHelpers.html">comparison_cellBased</a></span><span class="op">(</span>reference <span class="op">=</span> <span class="va">K013sA1</span>,target <span class="op">=</span> <span class="va">K013sA2</span>,</span>
<span>                                       thetas <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="op">-</span><span class="fl">30</span>,<span class="fl">30</span>,by <span class="op">=</span> <span class="fl">3</span><span class="op">)</span>,</span>
<span>                                       direction <span class="op">=</span> <span class="st">"both"</span>,</span>
<span>                                       returnX3Ps <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span><span class="va">comparisonData</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 1,638 × 10</span></span></span>
<span><span class="co">#&gt;    cellIndex     x     y fft_ccf pairwis…¹ theta refMi…² targM…³ joint…⁴ direc…⁵</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> 1, 2         24   -<span style="color: #BB0000;">26</span>   0.136     0.506   -<span style="color: #BB0000;">30</span>    <span style="text-decoration: underline;">2</span>454   <span style="text-decoration: underline;">18</span>481    <span style="text-decoration: underline;">2</span>275 refere…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> 1, 3         72   -<span style="color: #BB0000;">37</span>   0.148     0.388   -<span style="color: #BB0000;">30</span>    <span style="text-decoration: underline;">1</span>150   <span style="text-decoration: underline;">16</span>152    <span style="text-decoration: underline;">1</span>109 refere…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> 1, 4        -<span style="color: #BB0000;">58</span>     6   0.116     0.204   -<span style="color: #BB0000;">30</span>    <span style="text-decoration: underline;">1</span>103   <span style="text-decoration: underline;">16</span>846     531 refere…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> 1, 5        -<span style="color: #BB0000;">69</span>   -<span style="color: #BB0000;">25</span>   0.209     0.431   -<span style="color: #BB0000;">30</span>    <span style="text-decoration: underline;">1</span>450   <span style="text-decoration: underline;">19</span>207    <span style="text-decoration: underline;">1</span>351 refere…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> 1, 6        -<span style="color: #BB0000;">25</span>   -<span style="color: #BB0000;">13</span>   0.294     0.519   -<span style="color: #BB0000;">30</span>    <span style="text-decoration: underline;">1</span>751   <span style="text-decoration: underline;">21</span>076    <span style="text-decoration: underline;">1</span>336 refere…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> 1, 7         33    15   0.234     0.483   -<span style="color: #BB0000;">30</span>    <span style="text-decoration: underline;">2</span>401   <span style="text-decoration: underline;">22</span>759    <span style="text-decoration: underline;">2</span>101 refere…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> 2, 1        -<span style="color: #BB0000;">25</span>   -<span style="color: #BB0000;">49</span>   0.161     0.550   -<span style="color: #BB0000;">30</span>    <span style="text-decoration: underline;">2</span>498   <span style="text-decoration: underline;">17</span>790      99 refere…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> 2, 2          6   -<span style="color: #BB0000;">63</span>   0.134     0.176   -<span style="color: #BB0000;">30</span>     378   <span style="text-decoration: underline;">13</span>973      54 refere…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> 2, 3         40     8   0.174     0.602   -<span style="color: #BB0000;">30</span>    <span style="text-decoration: underline;">1</span>912   <span style="text-decoration: underline;">13</span>375       0 refere…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> 2, 7         49    28   0.229     0.536   -<span style="color: #BB0000;">30</span>    <span style="text-decoration: underline;">2</span>086   <span style="text-decoration: underline;">22</span>466    <span style="text-decoration: underline;">1</span>624 refere…</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># … with 1,628 more rows, and abbreviated variable names ¹​pairwiseCompCor,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   ²​refMissingCount, ³​targMissingCount, ⁴​jointlyMissing, ⁵​direction</span></span></span></code></pre></div>
<div class="section level3">
<h3 id="registration-based-features">Registration-based Features<a class="anchor" aria-label="anchor" href="#registration-based-features"></a>
</h3>
<p>Briefly, the registration-based features are calculated using the
estimated alignment data from the comparison procedure. For truly
matching cartridge cases, we expect that cells from one scan will tend
to “agree” on a particular alignment (comprised of a rotation +
translation) at which they match the other scan. We measure how well a
cell “matches” to the other scan by considering the rotation/translation
at which the cross-correlation function (CCF) is maximized. A higher CCF
value corresponds to higher similarity. For truly matching cartridge
cases, we expect that the rotation/translation that maximize the CCF for
each cell will be close to one another (low variability). We also expect
the CCF to be large, on average.</p>
<p>The <code><a href="../reference/registrationFeatures.html">feature_registration_all()</a></code> function calculates seven
registration-based features based on these expectations.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">comparisonData</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">direction</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/registrationFeatures.html">feature_registration_all</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 2 × 8</span></span></span>
<span><span class="co">#&gt;   direction           ccfMean  ccfSD pairwiseC…¹ pairw…² xTran…³ yTran…⁴ theta…⁵</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                 <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> reference_vs_target   0.302 0.085<span style="text-decoration: underline;">5</span>       0.541   0.154    39.2    37.7    19.5</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> target_vs_reference   0.249 0.077<span style="text-decoration: underline;">5</span>       0.551   0.150    31.8    26.2    14.6</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># … with abbreviated variable names ¹​pairwiseCompCorAve, ²​pairwiseCompCorSD,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   ³​xTransSD, ⁴​yTransSD, ⁵​thetaRotSD</span></span></span></code></pre></div>
<p>We can calculate the same type of features, but this time based on a
comparison of the <em>full</em> scans to each other. That is, instead of
dividing the scans into a grid of cells and estimating the alignment for
each cell, we determine the translation/rotation that maximizes CCF
between the full scans. We expect the correlation to be large if the two
scans are truly matching.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">comparisonDat_fullScan</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/comparisonHelpers.html">comparison_fullScan</a></span><span class="op">(</span><span class="va">K013sA1</span>,<span class="va">K013sA2</span>,</span>
<span>                                              returnX3Ps <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span><span class="va">comparisonDat_fullScan</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">direction</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/registrationFeatures.html">feature_registration_all</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 2 × 8</span></span></span>
<span><span class="co">#&gt;   direction           ccfMean ccfSD pairwiseCo…¹ pairw…² xTran…³ yTran…⁴ theta…⁵</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                 <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> reference_vs_target   0.270 <span style="color: #BB0000;">NA</span>           0.400 <span style="color: #BB0000;">NA</span>      <span style="color: #BB0000;">NA</span>      <span style="color: #BB0000;">NA</span>      <span style="color: #BB0000;">NA</span>     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> target_vs_reference   0.272 <span style="color: #BB0000;">NA</span>           0.410 <span style="color: #BB0000;">NA</span>      <span style="color: #BB0000;">NA</span>      <span style="color: #BB0000;">NA</span>      <span style="color: #BB0000;">NA</span>     </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># … with abbreviated variable names ¹​pairwiseCompCorAve, ²​pairwiseCompCorSD,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   ³​xTransSD, ⁴​yTransSD, ⁵​thetaRotSD</span></span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="density-based-features">Density-based Features<a class="anchor" aria-label="anchor" href="#density-based-features"></a>
</h3>
<p>We re-iterate an expectation here for emphasis: we expect that cells
from one scan will tend to “agree” on a particular alignment (comprised
of a rotation + translation) at which they match the other scan. The
registration-based features rely on the CCF to measure how well a
cell/scan “matches” to another scan and considers the distribution of
features at which the CCF is maximized.</p>
<p>We can consider the notion of cell “agreement” through a different
lens: considering just the estimated registration values, are there
regions in rotation/translation, <span class="math inline">\((\theta, x,
y)\)</span>, space where multiple cells seem to “bunch up?” The plot
below shows the estimated translations per cell across three rotation
angles, <span class="math inline">\(\{-3^\circ, 0^\circ,
3^\circ\}\)</span>, and both comparison directions. Note that the points
in the “reference vs. target” direction appear to bunch-up around <span class="math inline">\(\theta = 3\)</span> and <span class="math inline">\((x,y) = (-10,10)\)</span>. Conversely, the points
in the “target vs. reference” direction bunch-up around <span class="math inline">\(\theta = 3\)</span> and <span class="math inline">\((x,y) = (10,-10)\)</span>. This provides evidence
that the scans are matching in two ways: (1) multiple cells in both
directions “agree” on a particular rotation/translation and (2) the
agreed-upon rotation/translation are opposites of each other between the
two comparison directions.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">comparisonData</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">theta</span> <span class="op">&gt;=</span> <span class="op">-</span><span class="fl">3</span> <span class="op">&amp;</span> <span class="va">theta</span> <span class="op">&lt;=</span> <span class="fl">3</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x<span class="op">=</span><span class="va">x</span>,y<span class="op">=</span><span class="va">y</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_jitter.html" class="external-link">geom_jitter</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html" class="external-link">facet_wrap</a></span><span class="op">(</span><span class="va">direction</span><span class="op">~</span><span class="va">theta</span>,nrow <span class="op">=</span>  <span class="fl">2</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/lims.html" class="external-link">xlim</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">100</span>,<span class="fl">100</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/lims.html" class="external-link">ylim</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">100</span>,<span class="fl">100</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/coord_fixed.html" class="external-link">coord_fixed</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_bw</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_abline.html" class="external-link">geom_vline</a></span><span class="op">(</span>xintercept <span class="op">=</span> <span class="fl">0</span>,linetype <span class="op">=</span> <span class="st">"dashed"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_abline.html" class="external-link">geom_hline</a></span><span class="op">(</span>yintercept <span class="op">=</span> <span class="fl">0</span>,linetype <span class="op">=</span> <span class="st">"dashed"</span><span class="op">)</span> </span></code></pre></div>
<p><img src="scored_files/figure-html/unnamed-chunk-6-1.png" width="700"></p>
<p>The notion of “agreement” is formalized using the point
<em>density.</em> The <code>feature_densityBased_all</code> function
calculates three features related to the number of cells that agree upon
a particular rotation/translation and whether the estimation
rotations/translations are opposites of each other between the two
comparison directions.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">comparisonData</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/densityBasedFeatures.html">feature_densityBased_all</a></span><span class="op">(</span>eps <span class="op">=</span> <span class="fl">5</span>,minPts <span class="op">=</span> <span class="fl">5</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 1 × 4</span></span></span>
<span><span class="co">#&gt;   thetaDiff translationDiff clusterSize clusterInd</span></span>
<span><span class="co">#&gt;       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span>         0            1.16          11 TRUE</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="visual-diagnostic-based-features">Visual Diagnostic-based Features<a class="anchor" aria-label="anchor" href="#visual-diagnostic-based-features"></a>
</h3>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">comparisonDat_fullScan_estimRotation</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/comparisonHelpers.html">comparison_fullScan</a></span><span class="op">(</span><span class="va">K013sA1</span>,<span class="va">K013sA2</span>,</span>
<span>                                                            returnX3Ps <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>                                                            thetas <span class="op">=</span> <span class="op">-</span><span class="fl">3</span><span class="op">)</span></span>
<span></span>
<span><span class="va">comparisonDat_fullScan_estimRotation</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">direction</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/visualDiagnosticFeatures.html">feature_visualDiagnostic_all</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 2 × 9</span></span></span>
<span><span class="co">#&gt;   direction      neigh…¹ neigh…² neigh…³ neigh…⁴ diffe…⁵ diffe…⁶ filte…⁷ filte…⁸</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>            <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> reference_vs_…    74.4      <span style="color: #BB0000;">NA</span>    883.      <span style="color: #BB0000;">NA</span> -<span style="color: #BB0000;">0.034</span><span style="color: #BB0000; text-decoration: underline;">4</span>      <span style="color: #BB0000;">NA</span>    2.53      <span style="color: #BB0000;">NA</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> target_vs_ref…    97.4      <span style="color: #BB0000;">NA</span>    822.      <span style="color: #BB0000;">NA</span>  0.085<span style="text-decoration: underline;">8</span>      <span style="color: #BB0000;">NA</span>    4.86      <span style="color: #BB0000;">NA</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># … with abbreviated variable names ¹​neighborhoodSizeAve_ave,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   ²​neighborhoodSizeAve_sd, ³​neighborhoodSizeSD_ave, ⁴​neighborhoodSizeSD_sd,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   ⁵​differenceCor_ave, ⁶​differenceCor_sd, ⁷​filteredRatio_ave,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   ⁸​filteredRatio_sd</span></span></span></code></pre></div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by <a href="https://jzemmels.github.io/" class="external-link">Joseph Zemmels</a>, <a href="https://github.com/heike" class="external-link">Heike Hofmann</a>, <a href="https://srvanderplas.netlify.app/" class="external-link">Susan VanderPlas</a>, <a href="https://forensicstats.org/" class="external-link">CSAFE</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
